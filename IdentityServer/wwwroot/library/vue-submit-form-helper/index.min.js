(function(n){if(n.Vue&&n.Qs&&n.axios){var t=n.Vue,i=n.Qs,r=n.axios;t.prototype.$submitFormHelper=function(){var n=null,t=null,f=r.create(),u=function(){return new Promise(function(i,r){f.post("/Manage/Home/GetAntiXsrfRequestToken").then(function(r){n!==r.data.headerName&&(n=r.data.headerName);t=r.data.requestToken;i({headerName:r.data.headerName,requestToken:r.data.requestToken})}).catch(function(n){r(n)})})},s=function(){n=null;t=null},e=function(r,u,e){var o={"Content-Type":"application/x-www-form-urlencoded"};return o[n]=t,t=null,o["X-REQUEST-CSRF-TOKEN"]="true",new Promise(function(s,h){f({method:u,url:r,data:i.stringify(e,{allowDots:!0,arrayFormat:"indices"}),headers:o}).then(function(i){i.headers["x-response-csrf-token-name"]&&(n=i.headers["x-response-csrf-token-name"]);i.headers["x-response-csrf-token-value"]&&(t=i.headers["x-response-csrf-token-value"]);s(i)}).catch(function(n){h(n)})})},o=function(n,t,i){return new Promise(function(r,f){e(n,t,i).then(function(n){r(n)}).catch(function(o){o.response.status===400?u().then(function(){e(n,t,i).then(function(n){r(n)}).catch(function(n){f({error:o,errorIn:n})})}).catch(function(n){f({error:o,errorIn:n})}):f(o)})})},h=function(i,r,f){return new Promise(function(e,s){t===null||n===null?u().then(function(){o(i,r,f).then(function(n){e(n)}).catch(function(n){s(n)})}).catch(function(n){s(n)}):o(i,r,f).then(function(n){e(n)}).catch(function(n){s(n)})})};return{submitForm:h,getAntiforgeryToken:u,clearAntiforgeryToken:s}}()}else console.error("必要的依赖不足。需要先引用vuejs、qs和axios")})(window);